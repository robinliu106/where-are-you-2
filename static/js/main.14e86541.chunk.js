(this["webpackJsonpwhere-are-you-2"]=this["webpackJsonpwhere-are-you-2"]||[]).push([[0],{42:function(t,n,a){},63:function(t,n,a){"use strict";a.r(n);var c={};a.r(c),a.d(c,"generateRandomPoint",(function(){return N})),a.d(c,"calculateDistance",(function(){return B})),a.d(c,"shuffleArray",(function(){return E})),a.d(c,"pickRandomCity",(function(){return w})),a.d(c,"isNaN",(function(){return L}));var r,o=a(0),i=a(11),e=a.n(i),u=a(29),y=a(8),s=a.n(y),l=a(16),d=a(10),b=(a(42),a(22)),g=a.n(b),h=a(4),m=a(33),j=a.n(m),S=(a(50),a(34),a(21)),p=Object(S.b)({name:"game",initialState:{score:0,stage:1,activeRound:!0,cityCoords:{},markerCoords:{},cityName:""},reducers:{updateScore:function(t,n){t.score+=n.payload},updateCity:function(t,n){t.cityCoords=n.payload},updateMarker:function(t,n){t.markerCoords=n.payload},updateStage:function(t){t.stage+=1},setActiveRound:function(t,n){t.activeRound=n.payload}}}),O=p.actions,f=O.updateScore,v=O.updateCity,C=O.updateMarker,M=O.updateStage,A=(O.setActiveRound,function(t){return t.game.score}),P=function(t){return t.game.stage},x=function(t){return t.game.cityCoords},k=function(t){return t.game.markerCoords},T=p.reducer,_=a(1),N=function(t,n){var a=t.lng,c=t.lat,r=n/111300,o=Math.random(),i=Math.random(),e=r*Math.sqrt(o),u=2*Math.PI*i,y=e*Math.cos(u),s=e*Math.sin(u),l=y/Math.cos(c);return{lat:parseFloat((s+c).toFixed(6)),lng:parseFloat((l+a).toFixed(6))}},B=function(t,n,a,c){function r(t){return t*(Math.PI/180)}function o(t){return Math.pow(t,2)}t=r(t);var i=(a=r(a))-t,e=r(c-n),u=o(Math.sin(i/2))+Math.cos(t)*Math.cos(a)*o(Math.sin(e/2));return(.621371*(12742*Math.asin(Math.sqrt(u)))).toFixed(2)},E=function(t){for(var n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*n),c=t[n];t[n]=t[a],t[a]=c}return t},w=function(t){return t[Math.floor(Math.random()*t.length)]},L=function(t){var n=Number(t);return n!==n},R=[{country:"Afghanistan",city:"Kabul"},{country:"Albania",city:"Tirana"},{country:"Algeria",city:"Alger"},{country:"American Samoa",city:"Fagatogo"},{country:"Andorra",city:"Andorra la Vella"},{country:"Angola",city:"Luanda"},{country:"Anguilla",city:"The Valley"},{country:"Antigua and Barbuda",city:"Saint John's"},{country:"Argentina",city:"Buenos Aires"},{country:"Armenia",city:"Yerevan"},{country:"Aruba",city:"Oranjestad"},{country:"Australia",city:"Canberra"},{country:"Austria",city:"Wien"},{country:"Azerbaijan",city:"Baku"},{country:"Bahamas",city:"Nassau"},{country:"Bahrain",city:"al-Manama"},{country:"Bangladesh",city:"Dhaka"},{country:"Barbados",city:"Bridgetown"},{country:"Belarus",city:"Minsk"},{country:"Belgium",city:"Bruxelles [Brussel]"},{country:"Belize",city:"Belmopan"},{country:"Benin",city:"Porto-Novo"},{country:"Bermuda",city:"Hamilton"},{country:"Bhutan",city:"Thimphu"},{country:"Bolivia",city:"La Paz"},{country:"Bosnia and Herzegovina",city:"Sarajevo"},{country:"Botswana",city:"Gaborone"},{country:"Brazil",city:"Bras\xedlia"},{country:"Brunei",city:"Bandar Seri Begawan"},{country:"Bulgaria",city:"Sofia"},{country:"Burkina Faso",city:"Ouagadougou"},{country:"Burundi",city:"Bujumbura"},{country:"Cambodia",city:"Phnom Penh"},{country:"Cameroon",city:"Yaound"},{country:"Canada",city:"Ottawa"},{country:"Cape Verde",city:"Praia"},{country:"Cayman Islands",city:"George Town"},{country:"Central African Republic",city:"Bangui"},{country:"Chad",city:"N'Djam"},{country:"Chile",city:"Santiago de Chile"},{country:"China",city:"Peking"},{country:"Christmas Island",city:"Flying Fish Cove"},{country:"Cocos (Keeling) Islands",city:"West Island"},{country:"Colombia",city:"Santaf"},{country:"Comoros",city:"Moroni"},{country:"Congo",city:"Brazzaville"},{country:"Cook Islands",city:"Avarua"},{country:"Costa Rica",city:"San Jos"},{country:"Croatia",city:"Zagreb"},{country:"Cuba",city:"La Habana"},{country:"Cyprus",city:"Nicosia"},{country:"Czech Republic",city:"Praha"},{country:"Denmark",city:"Copenhagen"},{country:"Djibouti",city:"Djibouti"},{country:"Dominica",city:"Roseau"},{country:"Dominican Republic",city:"Santo Domingo de Guzm"},{country:"East Timor",city:"Dili"},{country:"Ecuador",city:"Quito"},{country:"Egypt",city:"Cairo"},{country:"El Salvador",city:"San Salvador"},{country:"England",city:"London"},{country:"Equatorial Guinea",city:"Malabo"},{country:"Eritrea",city:"Asmara"},{country:"Estonia",city:"Tallinn"},{country:"Ethiopia",city:"Addis Abeba"},{country:"Falkland Islands",city:"Stanley"},{country:"Faroe Islands",city:"T\xf3rshavn"},{country:"Fiji Islands",city:"Suva"},{country:"Finland",city:"Helsinki [Helsingfors]"},{country:"France",city:"Paris"},{country:"French Guiana",city:"Cayenne"},{country:"French Polynesia",city:"Papeete"},{country:"Gabon",city:"Libreville"},{country:"Gambia",city:"Banjul"},{country:"Georgia",city:"Tbilisi"},{country:"Germany",city:"Berlin"},{country:"Ghana",city:"Accra"},{country:"Gibraltar",city:"Gibraltar"},{country:"Greece",city:"Athenai"},{country:"Greenland",city:"Nuuk"},{country:"Grenada",city:"Saint George's"},{country:"Guadeloupe",city:"Basse-Terre"},{country:"Guam",city:"Aga"},{country:"Guatemala",city:"Ciudad de Guatemala"},{country:"Guinea",city:"Conakry"},{country:"Guinea-Bissau",city:"Bissau"},{country:"Guyana",city:"Georgetown"},{country:"Haiti",city:"Port-au-Prince"},{country:"Holy See (Vatican City State)",city:"Citt"},{country:"Honduras",city:"Tegucigalpa"},{country:"Hong Kong",city:"Victoria"},{country:"Hungary",city:"Budapest"},{country:"Iceland",city:"Reykjav"},{country:"India",city:"New Delhi"},{country:"Indonesia",city:"Jakarta"},{country:"Iran",city:"Tehran"},{country:"Iraq",city:"Baghdad"},{country:"Ireland",city:"Dublin"},{country:"Israel",city:"Jerusalem"},{country:"Italy",city:"Roma"},{country:"Ivory Coast",city:"Yamoussoukro"},{country:"Jamaica",city:"Kingston"},{country:"Japan",city:"Tokyo"},{country:"Jordan",city:"Amman"},{country:"Kazakhstan",city:"Astana"},{country:"Kenya",city:"Nairobi"},{country:"Kiribati",city:"Bairiki"},{country:"Kuwait",city:"Kuwait"},{country:"Kyrgyzstan",city:"Bishkek"},{country:"Laos",city:"Vientiane"},{country:"Latvia",city:"Riga"},{country:"Lebanon",city:"Beirut"},{country:"Lesotho",city:"Maseru"},{country:"Liberia",city:"Monrovia"},{country:"Libyan Arab Jamahiriya",city:"Tripoli"},{country:"Liechtenstein",city:"Vaduz"},{country:"Lithuania",city:"Vilnius"},{country:"Luxembourg",city:"Luxembourg [Luxemburg/L"},{country:"Macao",city:"Macao"},{country:"North Macedonia",city:"Skopje"},{country:"Madagascar",city:"Antananarivo"},{country:"Malawi",city:"Lilongwe"},{country:"Malaysia",city:"Kuala Lumpur"},{country:"Maldives",city:"Male"},{country:"Mali",city:"Bamako"},{country:"Malta",city:"Valletta"},{country:"Marshall Islands",city:"Dalap-Uliga-Darrit"},{country:"Martinique",city:"Fort-de-France"},{country:"Mauritania",city:"Nouakchott"},{country:"Mauritius",city:"Port-Louis"},{country:"Mayotte",city:"Mamoutzou"},{country:"Mexico",city:"Ciudad de M"},{country:"Micronesia, Federated States of",city:"Palikir"},{country:"Moldova",city:"Chisinau"},{country:"Monaco",city:"Monaco-Ville"},{country:"Mongolia",city:"Ulan Bator"},{country:"Montenegro",city:"Podgorica"},{country:"Montserrat",city:"Plymouth"},{country:"Morocco",city:"Rabat"},{country:"Mozambique",city:"Maputo"},{country:"Myanmar",city:"Rangoon (Yangon)"},{country:"Namibia",city:"Windhoek"},{country:"Nauru",city:"Yaren"},{country:"Nepal",city:"Kathmandu"},{country:"Netherlands",city:"Amsterdam"},{country:"Netherlands Antilles",city:"Willemstad"},{country:"New Caledonia",city:"Noum"},{country:"New Zealand",city:"Wellington"},{country:"Nicaragua",city:"Managua"},{country:"Niger",city:"Niamey"},{country:"Nigeria",city:"Abuja"},{country:"Niue",city:"Alofi"},{country:"Norfolk Island",city:"Kingston"},{country:"North Korea",city:"Pyongyang"},{country:"Northern Ireland",city:"Belfast"},{country:"Northern Mariana Islands",city:"Garapan"},{country:"Norway",city:"Oslo"},{country:"Oman",city:"Masqat"},{country:"Pakistan",city:"Islamabad"},{country:"Palau",city:"Koror"},{country:"Palestine",city:"Gaza"},{country:"Panama",city:"Ciudad de Panam"},{country:"Papua New Guinea",city:"Port Moresby"},{country:"Paraguay",city:"Asunci"},{country:"Peru",city:"Lima"},{country:"Philippines",city:"Manila"},{country:"Pitcairn",city:"Adamstown"},{country:"Poland",city:"Warszawa"},{country:"Portugal",city:"Lisboa"},{country:"Puerto Rico",city:"San Juan"},{country:"Qatar",city:"Doha"},{country:"Reunion",city:"Saint-Denis"},{country:"Romania",city:"Bucuresti"},{country:"Russian Federation",city:"Moscow"},{country:"Rwanda",city:"Kigali"},{country:"Saint Helena",city:"Jamestown"},{country:"Saint Kitts and Nevis",city:"Basseterre"},{country:"Saint Lucia",city:"Castries"},{country:"Saint Pierre and Miquelon",city:"Saint-Pierre"},{country:"Saint Vincent and the Grenadines",city:"Kingstown"},{country:"Samoa",city:"Apia"},{country:"San Marino",city:"San Marino"},{country:"Sao Tome and Principe",city:"S"},{country:"Saudi Arabia",city:"Riyadh"},{country:"Scotland",city:"Edinburgh"},{country:"Senegal",city:"Dakar"},{country:"Serbia",city:"Belgrade"},{country:"Seychelles",city:"Victoria"},{country:"Sierra Leone",city:"Freetown"},{country:"Singapore",city:"Singapore"},{country:"Slovakia",city:"Bratislava"},{country:"Slovenia",city:"Ljubljana"},{country:"Solomon Islands",city:"Honiara"},{country:"Somalia",city:"Mogadishu"},{country:"South Africa",city:"Pretoria"},{country:"South Korea",city:"Seoul"},{country:"South Sudan",city:"Juba"},{country:"Spain",city:"Madrid"},{country:"Sudan",city:"Khartum"},{country:"Suriname",city:"Paramaribo"},{country:"Svalbard and Jan Mayen",city:"Longyearbyen"},{country:"Swaziland",city:"Mbabane"},{country:"Sweden",city:"Stockholm"},{country:"Switzerland",city:"Bern"},{country:"Syria",city:"Damascus"},{country:"Tajikistan",city:"Dushanbe"},{country:"Tanzania",city:"Dodoma"},{country:"Thailand",city:"Bangkok"},{country:"The Democratic Republic of Congo",city:"Kinshasa"},{country:"Togo",city:"Lom\xe9"},{country:"Tokelau",city:"Fakaofo"},{country:"Tonga",city:"Nuku'alofa"},{country:"Trinidad and Tobago",city:"Port-of-Spain"},{country:"Tunisia",city:"Tunis"},{country:"Turkey",city:"Ankara"},{country:"Turkmenistan",city:"Ashgabat"},{country:"Turks and Caicos Islands",city:"Cockburn Town"},{country:"Tuvalu",city:"Funafuti"},{country:"Uganda",city:"Kampala"},{country:"Ukraine",city:"Kyiv"},{country:"United Arab Emirates",city:"Abu Dhabi"},{country:"United Kingdom",city:"London"},{country:"United States",city:"Washington"},{country:"Uruguay",city:"Montevideo"},{country:"Uzbekistan",city:"Toskent"},{country:"Vanuatu",city:"Port-Vila"},{country:"Venezuela",city:"Caracas"},{country:"Vietnam",city:"Hanoi"},{country:"Virgin Islands, British",city:"Road Town"},{country:"Virgin Islands, U.S.",city:"Charlotte Amalie"},{country:"Wales",city:"Cardiff"},{country:"Wallis and Futuna",city:"Mata-Utu"},{country:"Western Sahara",city:"El-Aai"},{country:"Yemen",city:"Sanaa"},{country:"Zambia",city:"Lusaka"},{country:"Zimbabwe",city:"Harare"}],D=a(9),K={height:"100vh",width:"70vw"},I=function(){var t=Object(h.c)(x);return Object(_.jsx)("div",{className:"street-view-map",children:Object(_.jsx)(D.c,{googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/where-are-you-2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,children:Object(_.jsx)(D.a,{mapContainerStyle:K,zoom:7,initialCenter:{lat:42.3517071,lng:-71.0691937},children:Object(_.jsx)(D.f,{position:t,visible:!0,options:{disableDefaultUI:!0,enableCloseButton:!1},onVisibleChanged:function(){return console.log("visible changed")}})})})})},F={height:"50vh",width:"30vw"},G=function(t){var n=t.polyLineCoords,a=t.cityName,c=t.actualDistance,r=Object(o.useState)(null),i=Object(d.a)(r,2),e=i[0],u=i[1],y=Object(o.useState)({lat:42.3517071,lng:-71.0691937}),s=Object(d.a)(y,2),l=s[0],b=s[1],g=Object(h.c)(x),m=Object(h.c)(k),j=Object(h.b)(),S=function(t){var n=t.latLng.toJSON(),a=n.lat,c=n.lng;j(C({lat:a,lng:c}))};return Object(_.jsx)("div",{children:Object(_.jsx)(D.c,{googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/where-are-you-2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,children:Object(_.jsxs)(D.a,{onLoad:function(t){return u(t)},mapContainerStyle:F,zoom:1,center:l,onDragEnd:function(){if(e){var t=e.getCenter().toJSON(),n=t.lat,a=t.lng;b({lat:n,lng:a})}},onClick:function(t){return S(t)},children:[m?Object(_.jsx)(D.d,{draggable:!0,position:m,onDragEnd:function(t){return S(t)}}):null,n?Object(_.jsx)(D.e,{path:n}):null,n?Object(_.jsx)(D.b,{position:g,children:Object(_.jsx)("div",{children:"Distance to: ".concat(a," is ").concat(c," miles")})}):null]})})})},H=a(35),z=a(37),V=a(36),W=a.n(V),U=Object(z.a)(r||(r=Object(H.a)(["\n    display: block;\n    margin: 0 auto;\n    border-color: red;\n"]))),J=function(t){t.loading;return Object(_.jsx)("div",{className:"sweet-loading",children:Object(_.jsx)(W.a,{color:"#ffffff",loading:!0,css:U,size:150})})};g.a.setApiKey(Object({NODE_ENV:"production",PUBLIC_URL:"/where-are-you-2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY);var Y=function(){var t=Object(h.c)(A),n=Object(h.c)(P),a=Object(h.c)(x),r=Object(h.c)(k),i=Object(h.b)(),e=Object(o.useState)(),y=Object(d.a)(e,2),b=y[0],m=y[1],S=Object(o.useState)(),p=Object(d.a)(S,2),O=p[0],T=p[1],E=Object(o.useState)(!0),D=Object(d.a)(E,2),K=D[0],F=D[1],H=Object(o.useState)(),z=Object(d.a)(H,2),V=z[0],W=z[1],U=Object(o.useState)(),Y=Object(d.a)(U,2),q=Y[0],Z=Y[1],Q=Object(o.useState)(),X=Object(d.a)(Q,2),$=X[0],tt=X[1];Object(o.useEffect)((function(){nt()}),[]);var nt=function(){var t=Object(l.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Z(!0),!V){t.next=8;break}return i(v(V)),t.next=5,ct(V);case 5:console.log("next city cache exists, using",V),t.next=15;break;case 8:return t.next=10,at();case 10:return n=t.sent,t.next=13,i(v(n));case 13:return t.next=15,ct(n);case 15:return t.next=17,at();case 17:return a=t.sent,t.next=20,W(a);case 20:Z(!1),console.log("next city is set",a);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),at=function(){var t=Object(l.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,console.log("-------------------------"),t.prev=2,t.next=5,j()(function(){var t=Object(l.a)(s.a.mark((function t(a){var c,r,o,i,e,u,y,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=w(R),r=c.country,o=c.city,t.next=3,g.a.fromAddress("".concat(o,", ").concat(r));case 3:return i=t.sent,console.log("res",i),t.next=7,i.results[0].geometry.location;case 7:return e=t.sent,u=e.lat,y=e.lng,n=N({lat:u,lng:y},100),console.log("randomPoint",n),t.next=14,fetch("https://maps.googleapis.com/maps/api/streetview/metadata?key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/where-are-you-2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_MAPS_API_KEY,"&location=").concat(n.lat,",").concat(n.lng,"&return_error_codes=true&radius=100&source=outdoor"));case 14:return l=t.sent,t.next=17,l.json();case 17:if("OK"===(d=t.sent).status){t.next=20;break}throw"error";case 20:console.log("streetViewResponse",d);case 21:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),{retries:20});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log("pick new city error:",t.t0);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(){return t.apply(this,arguments)}}(),ct=function(){var t=Object(l.a)(s.a.mark((function t(n){var a,c,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.lat,c=n.lng,t.prev=1,t.next=4,g.a.fromLatLng(a,c);case 4:return r=t.sent,t.next=7,r.results[0].formatted_address;case 7:o=t.sent,tt(o),console.log("address is",o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log("getCityName Error:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(n){return t.apply(this,arguments)}}(),rt=function(t){var n=0;t<10?n+=1e3:t<50?n+=500:t<200?n+=400:t<1e3?n+=300:t<5e3?n+=200:t<1e4&&(n+=100),i(f(n))},ot=function(){return Object(_.jsx)("p",{className:"lead",children:"Stage ".concat(n)})},it=function(){return Object(_.jsx)("p",{className:"lead",children:"Score: ".concat(t)})};return Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)(I,{}),Object(_.jsxs)("div",{className:"info-section",children:[Object(_.jsxs)("div",{className:"info-section__top",children:[Object(_.jsx)("h1",{className:"display-4",children:"Where are you?"}),Object(_.jsxs)("div",{className:"info-box",children:[Object(_.jsx)(ot,{}),Object(_.jsx)(it,{})]}),Object(_.jsx)(G,{polyLineCoords:b,cityName:$,actualDistance:O})]}),Object(_.jsxs)("div",{className:"info-section__bottom",children:[Object(_.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){if(r){m([a,r]);var t=B.apply(c,Object(u.a)(Object.values(a)).concat(Object(u.a)(Object.values(r))));t&&!L(t)&&(console.log("actual distance",t),T(t),rt(t)),F(!1)}else console.log("marker was not placed, zero points")},disabled:!K,children:"Submit"}),Object(_.jsxs)("button",{className:"btn btn-outline-success",id:"next_button",onClick:function(){i(C(null)),m(null),T(null),F(!0),nt(),i(M())},disabled:q,children:[q?"Loading":"Next City",q?Object(_.jsx)(J,{loading:!0}):null]})]})]})]})},q=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(Y,{})})},Z=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,65)).then((function(n){var a=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,i=n.getTTFB;a(t),c(t),r(t),o(t),i(t)}))},Q=Object(S.a)({reducer:{game:T}}),X=a(25);e.a.render(Object(_.jsx)(X.a,{forceRefresh:!0,children:Object(_.jsx)(h.a,{store:Q,children:Object(_.jsx)(q,{})})}),document.getElementById("root")),Z()}},[[63,1,2]]]);
//# sourceMappingURL=main.14e86541.chunk.js.map